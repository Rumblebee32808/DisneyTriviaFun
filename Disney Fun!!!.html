<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disney & Pixar Trivia Game</title>
<style>
body {
  margin:0;
  font-family:"Trebuchet MS", Arial, sans-serif;
  background: radial-gradient(circle at top, #1e90ff, #003366);
  color:white;
  overflow:hidden;
}
#ui {
  position:absolute;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:700px;
  background:rgba(0,40,80,0.85);
  padding:20px;
  border-radius:16px;
  box-shadow:0 0 20px rgba(255,215,0,0.4);
}
h2 {text-align:center;color:#ffd700;}
button {
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:16px;
  cursor:pointer;
  border-radius:10px;
  border:none;
  background:linear-gradient(#ffd700,#ffb700);
  color:#003366;
  font-weight:bold;
}
button.correct {background:#2ecc71;}
button.wrong {background:#e74c3c;color:white;}
#controls {display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px;}
#score, #feedback, #fact {text-align:center;margin-top:10px;font-weight:bold;}
#scoreboard {margin-top:15px;padding-top:10px;border-top:2px solid #ffd700;}
#initialInput {width:100%;padding:10px;margin-bottom:10px;font-size:16px;border-radius:8px;border:none;}
</style>
</head>
<body>

<div id="ui">
  <h2>‚ú® Disney & Pixar Trivia ‚ú®</h2>
  <input id="initialInput" maxlength="3" placeholder="Enter your initials (3 letters)">
  <div id="question">Press Start Game to begin!</div>
  <div id="fact"></div>
  <div id="answers"></div>
  <div id="feedback"></div>
  <div id="controls">
    <button onclick="startGame()">Start Game</button>
    <button onclick="skipQuestion()">Skip Question</button>
    <button onclick="showScore()">Show Score</button>
    <button onclick="endGame()">End Game</button>
    <button onclick="clearScores()">Clear Scores</button>
  </div>
  <div id="score"></div>
  <div id="scoreboard">
    <h3>üèÜ High Scores</h3>
    <ol id="highScores"></ol>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
/* ===================== THREE.JS BACKGROUND ===================== */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ alpha:true });
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);
const stars = new THREE.BufferGeometry();
const pos=[];
for(let i=0;i<1200;i++){ pos.push((Math.random()-0.5)*1000,(Math.random()-0.5)*1000,(Math.random()-0.5)*1000);}
stars.setAttribute("position",new THREE.Float32BufferAttribute(pos,3));
scene.add(new THREE.Points(stars,new THREE.PointsMaterial({color:0xffffff})));
camera.position.z=5;
(function animate(){ requestAnimationFrame(animate); scene.rotation.y+=0.0004; renderer.render(scene,camera); })();

/* ===================== DATA ===================== */
const data=[
{hero:"Simba",side:"Timon",villain:"Scar",world:"Pride Lands", fact:"Simba becomes king after defeating Scar in The Lion King."},
{hero:"Nala",side:"Zazu",villain:"Scar",world:"Pride Lands", fact:"Nala is Simba's childhood friend and later queen."},
{hero:"Mufasa",side:"Rafiki",villain:"Scar",world:"Pride Lands", fact:"Mufasa teaches Simba about the Circle of Life."},
{hero:"Ariel",side:"Flounder",villain:"Ursula",world:"Atlantica", fact:"Ariel collects human objects in her secret grotto."},
{hero:"Prince Eric",side:"Sebastian",villain:"Ursula",world:"Atlantica", fact:"Prince Eric sails the seas and rescues Ariel."},
{hero:"Aladdin",side:"Genie",villain:"Jafar",world:"Agrabah", fact:"Aladdin finds a magic lamp with Genie inside."},
{hero:"Jasmine",side:"Abu",villain:"Jafar",world:"Agrabah", fact:"Jasmine is the princess of Agrabah and seeks freedom."},
{hero:"Belle",side:"Lumi√®re",villain:"Gaston",world:"Beast's Castle", fact:"Belle loves reading and sees beyond appearances."},
{hero:"Beast",side:"Cogsworth",villain:"Gaston",world:"Beast's Castle", fact:"Beast is a prince cursed to look like a beast until love redeems him."},
{hero:"Mulan",side:"Mushu",villain:"Shan Yu",world:"Imperial China", fact:"Mulan disguises herself as a soldier to save her father."},
{hero:"Rapunzel",side:"Pascal",villain:"Mother Gothel",world:"Corona", fact:"Rapunzel's hair has magical healing powers."},
{hero:"Hercules",side:"Phil",villain:"Hades",world:"Mount Olympus", fact:"Hercules is the son of Zeus and Hera."},
{hero:"Moana",side:"Maui",villain:"Te KƒÅ",world:"Motunui", fact:"Moana restores the heart of Te Fiti to save her island."},
{hero:"Elsa",side:"Olaf",villain:"Hans",world:"Arendelle", fact:"Elsa can create ice and snow with her magic."},
{hero:"Anna",side:"Kristoff",villain:"Hans",world:"Arendelle", fact:"Anna is Elsa's optimistic and brave sister."},
{hero:"Nemo",side:"Dory",villain:"Bruce",world:"Great Barrier Reef", fact:"Nemo gets captured by a diver and his father searches for him."},
{hero:"Woody",side:"Buzz Lightyear",villain:"Lotso",world:"Toy Story World", fact:"Woody is a pull-string cowboy toy."},
{hero:"Buzz Lightyear",side:"Jessie",villain:"Lotso",world:"Toy Story World", fact:"Buzz believes he is a real space ranger at first."},
{hero:"Miguel",side:"H√©ctor",villain:"Ernesto de la Cruz",world:"Land of the Dead", fact:"Miguel loves music but must hide it from his family."},
{hero:"Raya",side:"Sisu",villain:"Namaari",world:"Kumandra", fact:"Raya unites the tribes to defeat the Druun."},
{hero:"Mirabel",side:"Abuela",villain:"None",world:"Encanto", fact:"Mirabel discovers she is the only Madrigal without a gift."},
{hero:"Judy Hopps",side:"Nick Wilde",villain:"None",world:"Zootopia", fact:"Judy becomes the first rabbit police officer in Zootopia."},
{hero:"Flik",side:"Atta",villain:"Hopper",world:"Ant Island", fact:"Flik invents creative solutions to save his colony."},
{hero:"Carl Fredricksen",side:"Russell",villain:"None",world:"Up's World", fact:"Carl flies his house to Paradise Falls using balloons."},
{hero:"Lightning McQueen",side:"Mater",villain:"Chick Hicks",world:"Radiator Springs", fact:"Lightning McQueen learns the value of friendship."},
{hero:"Joy",side:"Sadness",villain:"None",world:"Inside Out Mind", fact:"Joy learns that all emotions are important."},
{hero:"Wall-E",side:"Eve",villain:"Auto",world:"Earth/Space", fact:"Wall-E cleans up Earth while searching for life."},
{hero:"Hiro",side:"Baymax",villain:"Yokai",world:"San Fransokyo", fact:"Hiro is a tech genius who builds Baymax."}
];

/* ===================== VARIABLES ===================== */
let questions=[], current=0, score=0, locked=false, playerInitials="";
let nextQuestionTimeout;
function shuffle(a){return a.sort(()=>Math.random()-0.5);}
function buildAnswers(correct,pool){const a=[correct]; while(a.length<4){ const p=pool[Math.floor(Math.random()*pool.length)]; if(!a.includes(p)) a.push(p);} return shuffle(a);}
function getSidekickType(name){const types={"Flounder":"Fish","Olaf":"Snowman","Pascal":"Chameleon","Maui":"Demigod","Genie":"Genie","Buzz Lightyear":"Toy","Dory":"Fish","Timon":"Meerkat","Mushu":"Dragon","Nick Wilde":"Fox","Abu":"Monkey","Lumi√®re":"Candelabra","Cogsworth":"Clock"}; return types[name]||"Character";}

/* ===================== QUESTION GENERATION ===================== */
function generateQuestions(){
questions=[];
const heroes=data.map(d=>d.hero);
const sides=data.map(d=>d.side).filter(d=>"None"!==d);
const villains=data.map(d=>d.villain).filter(d=>"None"!==d);
const worlds=data.map(d=>d.world);

data.forEach(d=>{
  if(d.villain!=="None") questions.push({q:`üòà Who is the villain in ${d.world}?`,correct:d.villain,answers:buildAnswers(d.villain,villains), fact:d.fact});
  if(d.side!=="None") questions.push({q:`üêæ Who helps ${d.hero}?`,correct:d.side,answers:buildAnswers(d.side,sides), fact:d.fact});
  questions.push({q:`üè∞ Which world is ${d.hero} from?`,correct:d.world,answers:buildAnswers(d.world,worlds), fact:d.fact});
  questions.push({q:`‚≠ê Who is the hero of ${d.world}?`,correct:d.hero,answers:buildAnswers(d.hero,heroes), fact:d.fact});
  if(d.side!=="None") questions.push({q:`üßä What type of creature is ${d.side}?`,correct:getSidekickType(d.side),answers:buildAnswers(getSidekickType(d.side),["Fish","Snowman","Monkey","Dog","Dragon","Bird","Toy","Robot","Cat","Mouse"]), fact:d.fact});
});
shuffle(questions);
questions=questions.slice(0,200);
}

/* ===================== SCOREBOARD ===================== */
function saveHighScore(s){
  let scores=JSON.parse(localStorage.getItem("disneyScores"))||[];
  scores.push({initials:playerInitials, score:s});
  scores.sort((a,b)=>b.score-a.score);
  localStorage.setItem("disneyScores",JSON.stringify(scores.slice(0,5)));
  displayHighScores();
}
function displayHighScores(){
  const list=document.getElementById("highScores");
  list.innerHTML="";
  (JSON.parse(localStorage.getItem("disneyScores"))||[]).forEach(s=>{
    const li=document.createElement("li");
    li.textContent=`${s.initials}: ${s.score}`;
    list.appendChild(li);
  });
}

/* ===================== CLEAR SCORES ===================== */
function clearScores(){
  if(confirm("‚ö†Ô∏è Are you sure you want to clear all high scores? This cannot be undone.")){
    localStorage.removeItem("disneyScores");
    displayHighScores();
    alert("‚úÖ High scores cleared!");
  }
}

/* ===================== GAME LOGIC ===================== */
function startGame(){
  const input=document.getElementById("initialInput").value.toUpperCase().slice(0,3);
  if(!input){alert("Please enter your initials (3 letters) to start!"); return;}
  playerInitials=input;
  generateQuestions(); current=0; score=0; showQuestion();
}
function skipQuestion(){if(locked) return; current++; showQuestion();}
function showScore(){document.getElementById("feedback").innerText=`üìä Current Score: ${score} / ${questions.length}`;}
function endGame(){
  document.getElementById("question").innerText="üé¨ Game Ended";
  document.getElementById("answers").innerHTML="";
  document.getElementById("feedback").innerText="";
  document.getElementById("fact").innerText="";
  document.getElementById("score").innerText=`Final Score: ${score}`;
  clearTimeout(nextQuestionTimeout);
  saveHighScore(score);
}

function showQuestion(){
locked=false;
document.getElementById("feedback").innerText="";
document.getElementById("fact").innerText="";
if(current>=questions.length){endGame(); return;}
const q=questions[current];
document.getElementById("question").innerText=q.q;
const box=document.getElementById("answers"); box.innerHTML="";
q.answers.forEach(a=>{
  const b=document.createElement("button");
  b.textContent=a;
  b.onclick=()=>{
    if(locked) return; locked=true;
    [...box.children].forEach(btn=>{btn.disabled=true; if(btn.textContent===q.correct) btn.classList.add("correct");});
    if(a===q.correct){score++; document.getElementById("feedback").innerText="‚úÖ Correct!";}
    else{b.classList.add("wrong"); document.getElementById("feedback").innerText=`‚ùå Correct answer: ${q.correct}`;}
    document.getElementById("fact").innerText=`üí° Fun Fact: ${q.fact}`;
    nextQuestionTimeout = setTimeout(()=>{current++; showQuestion();},8000);
  };
  box.appendChild(b);
});
document.getElementById("score").innerText=`Score: ${score} / ${questions.length}`;
}

displayHighScores();
</script>
</body>
</html>
